<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>POSKedai - Sistem POS</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçΩÔ∏è</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;0,9..40,900;1,9..40,400&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --primary:#E8652B;--primary-hover:#D4571F;--primary-soft:#FEF0E8;--primary-muted:#FAD4BE;--primary-glow:rgba(232,101,43,0.12);--primary-shadow:0 4px 20px rgba(232,101,43,0.2);
            --bg:#FAFAF8;--bg-raised:#FFFFFF;--bg-inset:#F3F2EF;--bg-hover:#F7F6F3;
            --border:#E8E6E1;--border-strong:#D5D3CC;
            --text-primary:#1A1A1A;--text-secondary:#6B6B6B;--text-tertiary:#9A9A9A;--text-inverse:#FFFFFF;
            --success:#2D9D5E;--success-soft:#EBF7F0;--danger:#D93636;--danger-soft:#FDF0F0;--warning:#E09B1A;--warning-soft:#FFF8E8;--info:#3478F6;--info-soft:#EDF3FE;
            --r-sm:8px;--r-md:12px;--r-lg:16px;--r-xl:20px;--r-2xl:24px;--r-full:100px;
            --font:'DM Sans',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;--font-mono:'JetBrains Mono','Courier New',monospace;
            --shadow-xs:0 1px 2px rgba(0,0,0,0.04);--shadow-sm:0 1px 3px rgba(0,0,0,0.06),0 1px 2px rgba(0,0,0,0.04);--shadow-md:0 4px 12px rgba(0,0,0,0.06);--shadow-lg:0 8px 30px rgba(0,0,0,0.08);--shadow-xl:0 16px 50px rgba(0,0,0,0.1);
            --ease:cubic-bezier(0.25,0.46,0.45,0.94);--ease-spring:cubic-bezier(0.34,1.56,0.64,1);--dur:0.25s;--dur-fast:0.15s
        }
        html,body{overflow-x:hidden;width:100%;max-width:100vw}
        body{font-family:var(--font);background:var(--bg);color:var(--text-primary);min-height:100vh;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:15px;line-height:1.5}

        .login-screen{min-height:100vh;background:var(--bg);display:flex;align-items:center;justify-content:center;padding:24px;position:relative}
        .login-screen::before{content:'';position:absolute;top:-30%;right:-20%;width:600px;height:600px;background:radial-gradient(circle,var(--primary-glow),transparent 70%);border-radius:50%;pointer-events:none}
        .login-card{background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--r-2xl);padding:48px 40px;width:100%;max-width:380px;text-align:center;position:relative;z-index:2;box-shadow:var(--shadow-lg)}
        .login-logo{font-size:1.8rem;font-weight:800;margin-bottom:4px;letter-spacing:-1px}.login-logo span:first-child{color:var(--primary)}.login-logo span:last-child{color:var(--text-primary)}
        .login-subtitle{color:var(--text-tertiary);font-size:0.85rem;margin-bottom:32px;font-weight:500}
        .login-shop-name{font-size:0.95rem;font-weight:700;color:var(--text-primary);margin-bottom:28px;padding:14px 20px;background:var(--primary-soft);border-radius:var(--r-md);border:1px solid var(--primary-muted)}
        .pin-input{width:100%;padding:16px;border:1.5px solid var(--border);border-radius:var(--r-md);font-size:1.4rem;font-weight:700;text-align:center;letter-spacing:12px;margin-bottom:16px;transition:all var(--dur) var(--ease);font-family:var(--font-mono);background:var(--bg-raised);color:var(--text-primary);outline:none}
        .pin-input:focus{border-color:var(--primary);box-shadow:0 0 0 4px var(--primary-glow)}.pin-input::placeholder{letter-spacing:4px;font-size:0.9rem;color:var(--text-tertiary)}
        .btn-login{width:100%;padding:16px;background:var(--primary);color:var(--text-inverse);border:none;border-radius:var(--r-md);font-size:0.95rem;font-weight:700;cursor:pointer;transition:all var(--dur) var(--ease);font-family:var(--font)}.btn-login:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:var(--primary-shadow)}.btn-login:active{transform:scale(0.98)}
        .login-skip{margin-top:20px;color:var(--text-tertiary);font-size:0.82rem;cursor:pointer;font-weight:500;transition:color var(--dur)}.login-skip:hover{color:var(--primary)}

        .app-container{display:none}.app-container.show{display:block}
        .offline-banner{display:none;background:var(--danger);color:white;text-align:center;padding:6px;font-size:0.75rem;font-weight:600}.offline-banner.show{display:block}

        .header{background:rgba(255,255,255,0.85);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border);color:var(--text-primary);padding:10px 16px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100;gap:10px}
        .header-left{display:flex;align-items:center;gap:10px;min-width:0;flex:1}.header-logo{font-weight:800;font-size:1.05rem;letter-spacing:-0.5px;white-space:nowrap}.header-logo span:first-child{color:var(--primary)}
        .header-staff{background:var(--bg-inset);padding:4px 12px;border-radius:var(--r-full);font-size:0.72rem;font-weight:600;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:110px}
        .header-right{display:flex;align-items:center;gap:8px;flex-shrink:0}
        .header-counter{background:var(--primary-soft);color:var(--primary);padding:4px 12px;border-radius:var(--r-full);font-size:0.75rem;font-weight:700;font-family:var(--font-mono)}
        .header-time{font-size:0.75rem;color:var(--text-tertiary);font-weight:500;display:none}
        .btn-logout{background:transparent;border:1.5px solid var(--border);color:var(--text-secondary);padding:5px 14px;border-radius:var(--r-sm);font-size:0.72rem;font-weight:600;cursor:pointer;font-family:var(--font);transition:all var(--dur);white-space:nowrap}.btn-logout:hover{border-color:var(--danger);color:var(--danger);background:var(--danger-soft)}
        .offline-dot{display:none;width:8px;height:8px;background:var(--danger);border-radius:50%;animation:pulse 1.5s infinite}@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.5;transform:scale(1.3)}}

        .nav-tabs{display:flex;background:var(--bg-raised);position:sticky;top:47px;z-index:99;padding:6px 12px;gap:4px;border-bottom:1px solid var(--border);overflow-x:auto;-webkit-overflow-scrolling:touch}.nav-tabs::-webkit-scrollbar{display:none}
        .nav-tab{flex:1;padding:8px 6px;text-align:center;cursor:pointer;border:none;background:transparent;font-size:0.68rem;font-weight:600;color:var(--text-tertiary);border-radius:var(--r-sm);transition:all var(--dur) var(--ease);min-width:54px;white-space:nowrap;font-family:var(--font)}.nav-tab.active{color:var(--primary);background:var(--primary-soft);font-weight:700}.nav-tab:hover:not(.active){background:var(--bg-hover);color:var(--text-secondary)}.nav-tab .tab-icon{font-size:1.1rem;display:block;margin-bottom:1px}

        .tab-content{display:none;padding:16px;max-width:1400px;margin:0 auto;padding-bottom:80px;animation:fadeUp 0.35s var(--ease);overflow-x:hidden}.tab-content.active{display:block}@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

        .order-layout{display:flex;gap:20px;align-items:flex-start}.order-left{flex:1;min-width:0;overflow:hidden}.order-right{width:380px;flex-shrink:0}

        .card{background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--r-lg);padding:16px;margin-bottom:12px;transition:all var(--dur) var(--ease)}.card:hover{box-shadow:var(--shadow-sm)}
        .card-title{font-size:0.88rem;font-weight:700;margin-bottom:14px;display:flex;align-items:center;gap:8px;color:var(--text-primary);flex-wrap:wrap}

        .search-bar{position:relative;margin-bottom:12px}.search-bar input{width:100%;padding:11px 16px 11px 40px;border:1.5px solid var(--border);border-radius:var(--r-full);font-size:0.88rem;font-family:var(--font);transition:all var(--dur) var(--ease);background:var(--bg-raised);color:var(--text-primary);outline:none}.search-bar input:focus{border-color:var(--primary);box-shadow:0 0 0 4px var(--primary-glow)}.search-bar input::placeholder{color:var(--text-tertiary)}.search-bar::before{content:"üîç";position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:0.85rem}

        .category-filter{display:flex;gap:6px;overflow-x:auto;padding-bottom:6px;margin-bottom:14px;-webkit-overflow-scrolling:touch}.category-filter::-webkit-scrollbar{display:none}
        .cat-chip{padding:7px 16px;border-radius:var(--r-full);border:1.5px solid var(--border);background:var(--bg-raised);font-size:0.78rem;font-weight:600;cursor:pointer;white-space:nowrap;transition:all var(--dur) var(--ease);color:var(--text-secondary);font-family:var(--font)}.cat-chip:hover{border-color:var(--primary-muted);color:var(--primary)}.cat-chip.active,.cat-chip.featured{background:var(--primary);color:var(--text-inverse);border-color:var(--primary)}
        .featured-badge{display:inline-block;background:var(--primary);color:white;font-size:0.55rem;font-weight:800;padding:2px 6px;border-radius:4px;margin-left:4px;vertical-align:middle}

        .menu-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px}
        .menu-item{background:var(--bg-raised);border:1.5px solid var(--border);border-radius:var(--r-md);padding:14px 10px;text-align:center;cursor:pointer;transition:all var(--dur) var(--ease);position:relative;user-select:none;min-width:0}.menu-item:active{transform:scale(0.96)}.menu-item:hover{border-color:var(--primary-muted);box-shadow:var(--shadow-sm)}.menu-item.selected{border-color:var(--primary);background:var(--primary-soft);box-shadow:0 0 0 3px var(--primary-glow)}
        .menu-item .item-cat{font-size:0.6rem;color:var(--text-tertiary);font-weight:600;margin-bottom:3px;text-transform:uppercase;letter-spacing:0.5px}
        .menu-item .item-name{font-weight:700;font-size:0.78rem;color:var(--text-primary);margin-bottom:6px;line-height:1.25;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;word-break:break-word;min-height:2.2em}
        .menu-item .item-price{color:var(--primary);font-weight:800;font-size:0.9rem;font-family:var(--font-mono)}
        .menu-item .item-badge{position:absolute;top:-6px;right:-6px;background:var(--primary);color:var(--text-inverse);width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:800;box-shadow:0 2px 8px rgba(232,101,43,0.3)}
        .menu-item.just-added{animation:popIn 0.25s var(--ease-spring)}@keyframes popIn{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}

        .order-right .card{display:flex;flex-direction:column;padding:0;overflow:hidden;border:1.5px solid var(--border)}
        #cartCard .card-title{padding:14px 16px 12px;margin-bottom:0;border-bottom:1px solid var(--bg-inset)}
        #cartContent{display:none;flex-direction:column;flex:1;min-height:0}
        .cart-scroll{padding:0 16px;overflow-y:auto;overflow-x:hidden;flex:1;min-height:0}.cart-scroll::-webkit-scrollbar{width:3px}.cart-scroll::-webkit-scrollbar-thumb{background:var(--border-strong);border-radius:3px}
        .cart-footer{padding:14px 16px 16px;border-top:1px solid var(--border);background:var(--bg-raised);flex-shrink:0}

        .table-row{display:flex;gap:8px;align-items:center;margin:10px 0 14px;padding-top:4px}.table-row label{font-weight:700;font-size:0.82rem;white-space:nowrap;flex-shrink:0;color:var(--text-secondary)}
        .table-input{flex:1;min-width:0;padding:10px 12px;border:1.5px solid var(--border);border-radius:var(--r-sm);font-size:0.9rem;font-weight:700;text-align:center;font-family:var(--font);transition:all var(--dur);background:var(--bg-raised);outline:none}.table-input:focus{border-color:var(--primary);box-shadow:0 0 0 4px var(--primary-glow)}

        .cart-item{display:flex;align-items:center;gap:8px;padding:10px 0;border-bottom:1px solid var(--bg-inset)}.cart-item:last-child{border-bottom:none}
        .cart-info{flex:1;min-width:0;overflow:hidden}.cart-name{font-weight:700;font-size:0.82rem;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cart-price{font-size:0.72rem;color:var(--text-tertiary);margin-top:1px}
        .cart-controls{display:flex;align-items:center;gap:6px;flex-shrink:0}
        .qty-btn{width:30px;height:30px;border-radius:var(--r-sm);border:1.5px solid var(--border);background:var(--bg-raised);color:var(--text-primary);font-size:1rem;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;font-family:var(--font);transition:all var(--dur-fast);flex-shrink:0}.qty-btn:active{transform:scale(0.9);background:var(--bg-inset)}.qty-btn.minus{border-color:var(--danger);color:var(--danger)}.qty-btn.minus:active{background:var(--danger-soft)}
        .cart-qty{font-weight:800;font-size:0.88rem;min-width:20px;text-align:center}.cart-subtotal{font-weight:800;color:var(--primary);font-size:0.85rem;white-space:nowrap;flex-shrink:0;font-family:var(--font-mono)}

        .discount-section{display:flex;gap:8px;align-items:center;margin:10px 0;padding:10px 0;border-top:1px dashed var(--border)}.discount-section label{font-weight:700;font-size:0.82rem;white-space:nowrap;color:var(--text-secondary)}
        .discount-input{width:90px;padding:8px 10px;border:1.5px solid var(--border);border-radius:var(--r-sm);font-size:0.88rem;font-weight:700;text-align:center;font-family:var(--font-mono);transition:all var(--dur);background:var(--bg-raised);outline:none}.discount-input:focus{border-color:var(--primary);box-shadow:0 0 0 4px var(--primary-glow)}

        .subtotal-line{display:flex;justify-content:space-between;font-size:0.82rem;color:var(--text-secondary);padding:3px 0}.discount-line{color:var(--success);font-weight:600}

        .total-bar{background:var(--text-primary);color:var(--text-inverse);padding:16px 18px;border-radius:var(--r-md);display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
        .total-label{font-size:0.82rem;font-weight:600;opacity:0.7}.total-amount{font-size:1.4rem;font-weight:900;letter-spacing:-0.5px;font-family:var(--font-mono)}

        .payment-methods{display:flex;gap:6px;margin:10px 0}
        .pay-btn{flex:1;padding:10px 6px;border:1.5px solid var(--border);border-radius:var(--r-sm);background:var(--bg-raised);cursor:pointer;text-align:center;font-weight:700;font-size:0.75rem;transition:all var(--dur) var(--ease);color:var(--text-secondary);font-family:var(--font)}.pay-btn.active{border-color:var(--primary);background:var(--primary-soft);color:var(--primary)}.pay-btn:hover:not(.active){border-color:var(--primary-muted)}.pay-btn .pay-icon{font-size:1.15rem;display:block;margin-bottom:2px}

        .cash-calc{background:var(--bg-inset);border-radius:var(--r-md);padding:12px;margin:8px 0;display:none;border:1px solid var(--border)}.cash-calc.show{display:block}
        .quick-cash{display:flex;gap:5px;margin-bottom:8px;flex-wrap:wrap}
        .quick-cash-btn{padding:6px 12px;border:1px solid var(--border);border-radius:var(--r-sm);background:var(--bg-raised);font-size:0.72rem;font-weight:700;cursor:pointer;font-family:var(--font-mono);color:var(--text-primary);transition:all var(--dur-fast)}.quick-cash-btn:hover{border-color:var(--primary);color:var(--primary)}.quick-cash-btn:active{transform:scale(0.95);background:var(--primary-soft)}
        .cash-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;gap:8px}.cash-row label{font-weight:700;font-size:0.82rem;color:var(--text-secondary)}
        .cash-input{width:120px;padding:10px 12px;border:1.5px solid var(--border);border-radius:var(--r-sm);font-size:1rem;font-weight:800;text-align:right;font-family:var(--font-mono);background:var(--bg-raised);outline:none}.cash-input:focus{border-color:var(--primary)}
        .change-box{text-align:center;padding:12px;border-radius:var(--r-sm);font-weight:800;font-size:1rem;font-family:var(--font-mono)}.change-box.ok{background:var(--success-soft);color:var(--success)}.change-box.bad{background:var(--danger-soft);color:var(--danger)}

        .pay-info-box{background:var(--bg-inset);border-radius:var(--r-md);padding:16px;margin:8px 0;text-align:center;display:none;border:1px solid var(--border)}.pay-info-box.show{display:block}
        #qrBox img{max-width:240px;width:100%;border-radius:var(--r-md);margin-bottom:8px;border:1px solid var(--border)}
        #completeQrBox img{max-width:160px;border-radius:var(--r-sm);margin-bottom:8px;border:1px solid var(--border)}
        .bank-detail{font-size:0.82rem;line-height:1.6}.bank-acc{font-size:1.1rem;font-weight:900;color:var(--primary);letter-spacing:1px;margin:5px 0;font-family:var(--font-mono)}

        .btn-row{display:flex;gap:8px;margin-top:10px}.btn-row .btn{flex:1}
        .btn{padding:10px 18px;border:none;border-radius:var(--r-sm);font-size:0.88rem;font-weight:700;cursor:pointer;transition:all var(--dur) var(--ease);display:inline-flex;align-items:center;gap:6px;font-family:var(--font);justify-content:center;outline:none}.btn:active{transform:scale(0.97)}
        .btn-primary{background:var(--primary);color:var(--text-inverse);padding:14px;font-size:0.92rem}.btn-primary:hover{background:var(--primary-hover);box-shadow:var(--primary-shadow)}
        .btn-success{background:var(--success);color:var(--text-inverse)}.btn-success:hover{filter:brightness(1.08)}
        .btn-danger{background:var(--danger);color:var(--text-inverse)}.btn-warning{background:var(--warning);color:var(--text-inverse)}.btn-info{background:var(--info);color:var(--text-inverse)}
        .btn-outline{background:var(--bg-raised);color:var(--text-primary);border:1.5px solid var(--border)}.btn-outline:hover{border-color:var(--border-strong);background:var(--bg-hover)}
        .btn-ghost{background:var(--danger-soft);color:var(--danger)}.btn-whatsapp{background:#25D366;color:white}.btn-whatsapp:hover{background:#1FAF58}
        .btn-sm{padding:6px 12px;font-size:0.72rem;border-radius:6px}.btn:disabled{opacity:0.4;cursor:not-allowed}
        .btn-save-order{background:var(--info);color:var(--text-inverse);padding:12px;font-size:0.88rem}
        .shortcut-hint{font-size:0.6rem;color:var(--text-tertiary);text-align:center;margin-top:6px;font-weight:500;display:none}

        .cart-empty{text-align:center;padding:40px 20px;color:var(--text-tertiary)}.cart-empty-icon{font-size:2.2rem;margin-bottom:8px;opacity:0.4}.cart-empty-text{font-size:0.85rem;font-weight:600;color:var(--text-secondary)}.cart-empty-hint{font-size:0.75rem;margin-top:4px}

        .form-group{margin-bottom:12px}.form-group label{display:block;margin-bottom:5px;font-weight:700;font-size:0.8rem;color:var(--text-secondary)}
        .form-input{width:100%;padding:11px 14px;border:1.5px solid var(--border);border-radius:var(--r-sm);font-size:0.88rem;transition:all var(--dur) var(--ease);font-family:var(--font);background:var(--bg-raised);outline:none;color:var(--text-primary)}.form-input:focus{border-color:var(--primary);box-shadow:0 0 0 4px var(--primary-glow)}
        .form-row{display:flex;gap:10px}.form-row .form-group{flex:1}
        select.form-input{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%239A9A9A' d='M6 8L1 3h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:32px}
        .qr-divider{display:flex;align-items:center;gap:10px;margin:10px 0;color:var(--text-tertiary);font-size:0.75rem;font-weight:600}.qr-divider::before,.qr-divider::after{content:'';flex:1;height:1px;background:var(--border)}

        .order-card{background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--r-lg);padding:14px;margin-bottom:10px;border-left:4px solid var(--success);transition:all var(--dur) var(--ease)}.order-card:hover{box-shadow:var(--shadow-sm)}.order-card.pending{border-left-color:var(--warning)}.order-card.cancelled{border-left-color:var(--danger);opacity:0.55}
        .order-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:6px;gap:8px;flex-wrap:wrap}
        .order-num{font-weight:900;font-size:1.05rem;color:var(--primary);letter-spacing:-0.5px;font-family:var(--font-mono)}.order-time{font-size:0.72rem;color:var(--text-secondary)}.order-staff{font-size:0.68rem;color:var(--text-tertiary)}
        .order-badge{padding:4px 12px;border-radius:var(--r-full);font-size:0.65rem;font-weight:700;text-transform:uppercase;letter-spacing:0.3px}
        .badge-done{background:var(--success-soft);color:var(--success)}.badge-pending{background:var(--warning-soft);color:var(--warning)}.badge-cancel{background:var(--danger-soft);color:var(--danger)}
        .order-items{font-size:0.78rem;color:var(--text-secondary);margin-bottom:8px;line-height:1.5}
        .order-bottom{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}
        .order-total{font-weight:900;font-size:1rem;color:var(--primary);font-family:var(--font-mono)}.order-discount{font-size:0.68rem;color:var(--success);font-weight:600}.order-pay{font-size:0.68rem;color:var(--text-tertiary)}.order-actions{display:flex;gap:5px}

        .order-filter{display:flex;gap:3px;margin:10px 0;background:var(--bg-inset);padding:3px;border-radius:var(--r-sm);flex-wrap:wrap}
        .order-filter-btn{flex:1;padding:7px 4px;border:none;border-radius:6px;background:transparent;font-size:0.72rem;font-weight:700;cursor:pointer;color:var(--text-tertiary);font-family:var(--font);transition:all var(--dur);min-width:60px}.order-filter-btn.active{background:var(--bg-raised);color:var(--primary);box-shadow:var(--shadow-xs)}

        .sales-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}
        .stat-card{background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--r-lg);padding:18px;text-align:center;transition:all var(--dur) var(--ease)}.stat-card:hover{box-shadow:var(--shadow-sm);transform:translateY(-1px)}
        .stat-value{font-size:1.4rem;font-weight:900;color:var(--primary);letter-spacing:-0.5px;font-family:var(--font-mono)}.stat-label{font-size:0.7rem;color:var(--text-tertiary);font-weight:600;margin-top:3px}
        .stat-trend{font-size:0.65rem;font-weight:700;margin-top:5px;display:inline-flex;align-items:center;gap:2px;padding:2px 8px;border-radius:var(--r-full)}.stat-trend.up{background:var(--success-soft);color:var(--success)}.stat-trend.down{background:var(--danger-soft);color:var(--danger)}.stat-trend.neutral{background:var(--bg-inset);color:var(--text-tertiary)}

        .stat-card.hero-stat{grid-column:span 2;background:var(--text-primary);border:none;color:var(--text-inverse);position:relative;overflow:hidden;padding:28px}
        .stat-card.hero-stat::before{content:'';position:absolute;top:-40%;right:-20%;width:200px;height:200px;background:radial-gradient(circle,rgba(232,101,43,0.2),transparent 70%);border-radius:50%}
        .stat-card.hero-stat .stat-value{font-size:2.2rem;color:var(--text-inverse);position:relative;z-index:1}.stat-card.hero-stat .stat-label{color:rgba(255,255,255,0.6);position:relative;z-index:1;font-size:0.78rem}.stat-card.hero-stat .stat-trend{background:rgba(255,255,255,0.15);color:var(--text-inverse)}

        .date-nav{display:flex;align-items:center;gap:8px;margin-bottom:12px;flex-wrap:wrap}
        .date-nav-btn{width:36px;height:36px;border-radius:var(--r-sm);border:1.5px solid var(--border);background:var(--bg-raised);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:0.9rem;transition:all var(--dur);color:var(--text-primary);flex-shrink:0}.date-nav-btn:hover{border-color:var(--primary);color:var(--primary);background:var(--primary-soft)}.date-nav-btn:active{transform:scale(0.95)}
        .date-nav-input{flex:1;min-width:130px}
        .date-nav-today{padding:7px 14px;border-radius:var(--r-sm);border:1.5px solid var(--primary);background:var(--primary-soft);color:var(--primary);font-size:0.72rem;font-weight:700;cursor:pointer;font-family:var(--font);transition:all var(--dur);white-space:nowrap}.date-nav-today:hover{background:var(--primary);color:var(--text-inverse)}

        .report-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;flex-wrap:wrap;gap:10px}
        .report-tabs{display:flex;gap:3px;background:var(--bg-inset);padding:3px;border-radius:var(--r-sm);flex:1;max-width:320px}
        .report-tab{flex:1;padding:8px 6px;border:none;border-radius:6px;background:transparent;text-align:center;font-weight:700;font-size:0.75rem;cursor:pointer;color:var(--text-tertiary);font-family:var(--font);transition:all var(--dur) var(--ease)}.report-tab.active{background:var(--bg-raised);color:var(--primary);box-shadow:var(--shadow-xs)}
        .btn-export{padding:7px 14px;border-radius:var(--r-sm);border:1.5px solid var(--border);background:var(--bg-raised);color:var(--text-secondary);font-size:0.72rem;font-weight:700;cursor:pointer;font-family:var(--font);display:flex;align-items:center;gap:5px;transition:all var(--dur)}.btn-export:hover{border-color:var(--success);color:var(--success);background:var(--success-soft)}
        .today-badge{display:inline-flex;align-items:center;gap:5px;background:var(--primary-soft);padding:7px 14px;border-radius:var(--r-full);font-size:0.78rem;font-weight:700;color:var(--primary);margin-bottom:12px;border:1px solid var(--primary-muted)}

        .pay-stats{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap}
        .pay-stat{flex:1;min-width:calc(33.333% - 6px);background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--r-md);padding:14px 8px;text-align:center;transition:all var(--dur)}.pay-stat:hover{box-shadow:var(--shadow-sm)}
        .pay-stat .ps-icon{font-size:1.3rem}.pay-stat .ps-val{font-weight:800;font-size:0.88rem;margin-top:5px;font-family:var(--font-mono)}.pay-stat .ps-count{font-size:0.62rem;color:var(--text-tertiary);font-weight:600;margin-top:2px}.pay-stat .ps-bar{height:3px;background:var(--bg-inset);border-radius:3px;margin-top:6px;overflow:hidden}.pay-stat .ps-bar-fill{height:100%;border-radius:3px;transition:width 0.6s var(--ease)}

        .chart-container{position:relative;padding:8px 0}.chart-bars{display:flex;align-items:flex-end;gap:5px;height:160px;padding:8px 0}
        .chart-bar-wrap{flex:1;display:flex;flex-direction:column;align-items:center;height:100%;justify-content:flex-end;cursor:pointer;position:relative;min-width:0}
        .chart-bar{width:100%;background:linear-gradient(to top,var(--primary),#F08C5A);border-radius:6px 6px 2px 2px;min-height:3px;transition:all 0.4s var(--ease)}.chart-bar:hover{filter:brightness(1.08);transform:scaleX(1.05)}
        .chart-bar-label{font-size:0.55rem;color:var(--text-tertiary);font-weight:600;margin-top:6px;text-align:center;line-height:1.2}
        .chart-bar-value{font-size:0.55rem;color:var(--text-primary);font-weight:700;margin-bottom:3px;opacity:0;transition:opacity var(--dur);font-family:var(--font-mono)}.chart-bar-wrap:hover .chart-bar-value{opacity:1}
        .chart-bar-wrap.today .chart-bar{background:linear-gradient(to top,var(--primary-hover),var(--primary));box-shadow:0 4px 12px rgba(232,101,43,0.25)}.chart-bar-wrap.today .chart-bar-label{color:var(--primary);font-weight:800}

        .hourly-chart{display:flex;align-items:flex-end;gap:2px;height:100px;padding:6px 0}.hourly-bar-wrap{flex:1;display:flex;flex-direction:column;align-items:center;height:100%;justify-content:flex-end;min-width:0}
        .hourly-bar{width:100%;border-radius:3px 3px 1px 1px;min-height:2px;transition:height 0.4s var(--ease)}.hourly-bar.peak{background:linear-gradient(to top,var(--primary-hover),var(--primary))}.hourly-bar.normal{background:var(--primary-muted);opacity:0.7}.hourly-bar.low{background:var(--bg-inset)}
        .hourly-label{font-size:0.42rem;color:var(--text-tertiary);font-weight:600;margin-top:3px;transform:rotate(-45deg);white-space:nowrap}
        .peak-badge{display:inline-flex;align-items:center;gap:3px;background:var(--primary-soft);color:var(--primary);padding:5px 12px;border-radius:var(--r-full);font-size:0.7rem;font-weight:700;margin-top:8px;border:1px solid var(--primary-muted)}

        .donut-container{display:flex;align-items:center;gap:20px;padding:8px 0}.donut-chart{width:130px;height:130px;border-radius:50%;position:relative;flex-shrink:0}
        .donut-hole{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:70px;height:70px;background:var(--bg-raised);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:0 0 12px rgba(0,0,0,0.04)}
        .donut-hole-val{font-size:1rem;font-weight:900;font-family:var(--font-mono)}.donut-hole-label{font-size:0.55rem;color:var(--text-tertiary);font-weight:600}
        .pie-legend{flex:1;min-width:0}.pie-legend-item{display:flex;align-items:center;gap:6px;padding:5px 0;font-size:0.78rem}.pie-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}.pie-legend-name{flex:1;font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pie-legend-val{font-weight:800;color:var(--primary);font-size:0.8rem;font-family:var(--font-mono)}.pie-legend-pct{font-size:0.65rem;color:var(--text-tertiary);font-weight:600;margin-left:3px}

        .cal-heatmap{display:grid;grid-template-columns:repeat(7,1fr);gap:3px;margin:8px 0}.cal-day-header{font-size:0.55rem;color:var(--text-tertiary);font-weight:700;text-align:center;padding:3px 0}
        .cal-day{aspect-ratio:1;border-radius:6px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.6rem;font-weight:700;cursor:pointer;transition:all var(--dur);border:1px solid transparent;position:relative}.cal-day:hover{transform:scale(1.1);z-index:2;box-shadow:var(--shadow-sm)}
        .cal-day .cal-date{font-size:0.65rem;font-weight:800}.cal-day .cal-val{font-size:0.45rem;font-weight:600;margin-top:1px;font-family:var(--font-mono)}
        .cal-day.empty{background:transparent;cursor:default}.cal-day.empty:hover{transform:none;box-shadow:none}
        .cal-day.level-0{background:var(--bg-inset);color:var(--text-tertiary)}.cal-day.level-1{background:#FEF0E8;color:var(--primary)}.cal-day.level-2{background:var(--primary-muted);color:var(--primary)}.cal-day.level-3{background:#F5A06A;color:white}.cal-day.level-4{background:#E8652B;color:white}.cal-day.level-5{background:var(--primary-hover);color:white}
        .cal-day.today-mark{border:2px solid var(--text-primary);box-shadow:0 0 0 2px var(--primary-glow)}
        .cal-legend{display:flex;align-items:center;gap:6px;justify-content:center;margin-top:10px;font-size:0.62rem;color:var(--text-tertiary);flex-wrap:wrap}.cal-legend-box{width:12px;height:12px;border-radius:3px}

        .summary-row{display:flex;gap:8px;margin:12px 0;padding:14px;background:var(--bg-raised);border-radius:var(--r-md);border:1px solid var(--border);flex-wrap:wrap}.summary-item{flex:1;text-align:center;min-width:80px}.summary-item .si-val{font-weight:900;font-size:0.9rem;font-family:var(--font-mono)}.summary-item .si-label{font-size:0.62rem;color:var(--text-tertiary);font-weight:600;margin-top:2px}.summary-divider{width:1px;background:var(--border)}

        .top-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid var(--bg-inset);gap:10px}.top-item:last-child{border-bottom:none}
        .top-left{display:flex;align-items:center;gap:10px;min-width:0;flex:1}
        .top-rank{width:28px;height:28px;border-radius:var(--r-sm);background:var(--primary);color:var(--text-inverse);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:0.75rem;flex-shrink:0}.top-rank.r1{background:#D4941A}.top-rank.r2{background:#8B95A5}.top-rank.r3{background:#C47040}
        .top-info{flex:1;min-width:0}.top-name{font-weight:700;font-size:0.82rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.top-rev{font-size:0.68rem;color:var(--text-tertiary);font-family:var(--font-mono)}
        .top-right{text-align:right;flex-shrink:0}.top-qty{font-weight:800;color:var(--primary);font-size:0.85rem;font-family:var(--font-mono)}.top-bar-bg{width:70px;height:4px;background:var(--bg-inset);border-radius:4px;margin-top:3px}.top-bar-fill{height:100%;background:var(--primary);border-radius:4px;transition:width 0.6s var(--ease)}

        .menu-manage-item{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:var(--bg-raised);border-radius:var(--r-md);margin-bottom:6px;border:1px solid var(--border);transition:all var(--dur);gap:10px}.menu-manage-item:hover{box-shadow:var(--shadow-xs)}
        .mm-info{flex:1;min-width:0}.mm-name{font-weight:700;font-size:0.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mm-cat{font-size:0.68rem;color:var(--text-tertiary);font-weight:600}.mm-price{color:var(--primary);font-weight:800;font-size:0.85rem;font-family:var(--font-mono)}.mm-actions{display:flex;gap:5px;flex-shrink:0}

        .staff-item{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:var(--bg-raised);border-radius:var(--r-md);margin-bottom:6px;border:1px solid var(--border);gap:10px}.staff-item .si-info{flex:1;min-width:0}.staff-item .si-name{font-weight:700;font-size:0.85rem}.staff-item .si-role{font-size:0.68rem;color:var(--text-tertiary);font-weight:600}

        .receipt{background:var(--bg-raised);padding:24px;font-family:var(--font-mono);font-size:0.78rem;max-width:300px;margin:0 auto;width:100%}.receipt-header{text-align:center;margin-bottom:14px;padding-bottom:10px;border-bottom:2px dashed var(--text-primary)}.receipt-shop{font-weight:700;font-size:1rem}.receipt-addr{font-size:0.7rem;color:var(--text-secondary)}.receipt-line{display:flex;justify-content:space-between;padding:2px 0;gap:6px}.receipt-line span:first-child{flex:1;word-break:break-word}.receipt-line span:last-child{white-space:nowrap}.receipt-divider{border-top:1px dashed var(--text-primary);margin:6px 0}.receipt-total .receipt-line{font-weight:700;font-size:1rem}.receipt-footer{text-align:center;margin-top:14px;font-size:0.72rem;color:var(--text-secondary)}

        .api-error-box{background:var(--danger-soft);border:1px solid var(--danger);border-radius:var(--r-md);padding:14px;margin:10px 0;font-size:0.8rem;color:var(--danger)}.api-error-box strong{display:block;margin-bottom:4px}

        .menu-cat-section{margin-bottom:18px}.menu-cat-header{display:flex;align-items:center;gap:8px;padding:10px 14px;border-radius:var(--r-md);margin-bottom:10px;font-weight:800;font-size:0.85rem}.menu-cat-header.featured-section{background:var(--primary);color:white}.menu-cat-header.normal-section{background:var(--bg-inset);color:var(--text-secondary);border:1px solid var(--border)}
        .menu-readonly-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px}.menu-readonly-item{background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--r-md);padding:12px;display:flex;flex-direction:column;gap:4px;transition:box-shadow var(--dur)}.menu-readonly-item:hover{box-shadow:var(--shadow-sm)}.mri-cat{font-size:0.6rem;color:var(--text-tertiary);font-weight:600;text-transform:uppercase}.mri-name{font-weight:700;font-size:0.82rem;line-height:1.3}.mri-price{font-weight:800;color:var(--primary);font-size:0.9rem;margin-top:2px;font-family:var(--font-mono)}

        .dapur-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap;gap:8px}.dapur-count-badge{background:var(--danger);color:white;padding:4px 12px;border-radius:var(--r-full);font-size:0.78rem;font-weight:800}
        .dapur-order-card{background:var(--bg-raised);border:2px solid var(--border);border-radius:var(--r-lg);padding:16px;margin-bottom:12px;transition:all var(--dur);animation:fadeUp 0.35s var(--ease)}.dapur-order-card.urgent{border-color:var(--danger);background:var(--danger-soft)}.dapur-order-card.normal{border-color:var(--warning);background:var(--warning-soft)}
        .dapur-order-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;flex-wrap:wrap;gap:6px}.dapur-order-num{font-size:1.1rem;font-weight:900;font-family:var(--font-mono)}.dapur-table-badge{background:var(--primary-soft);color:var(--primary);padding:4px 10px;border-radius:var(--r-sm);font-size:0.75rem;font-weight:700}
        .dapur-time-badge{font-size:0.72rem;font-weight:600;padding:4px 10px;border-radius:var(--r-sm)}.dapur-time-badge.fresh{background:var(--success-soft);color:var(--success)}.dapur-time-badge.medium{background:var(--warning-soft);color:var(--warning)}.dapur-time-badge.urgent{background:var(--danger-soft);color:var(--danger)}
        .dapur-items-list{display:flex;flex-direction:column;gap:5px;margin-bottom:12px}.dapur-item-row{display:flex;align-items:center;gap:8px;padding:7px 10px;background:var(--bg-inset);border-radius:var(--r-sm)}.dapur-item-qty{background:var(--primary);color:white;width:26px;height:26px;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;font-weight:900;font-size:0.82rem;flex-shrink:0}.dapur-item-name{font-weight:600;font-size:0.85rem}.dapur-staff{font-size:0.7rem;color:var(--text-tertiary);margin-bottom:8px}
        .btn-siap{width:100%;padding:10px;background:var(--success);color:white;border:none;border-radius:var(--r-sm);font-weight:800;font-size:0.88rem;cursor:pointer;font-family:var(--font);transition:all var(--dur)}.btn-siap:hover{filter:brightness(1.08);transform:translateY(-1px)}
        .dapur-empty{text-align:center;padding:50px 20px;color:var(--text-secondary)}.dapur-empty-icon{font-size:2.5rem;margin-bottom:12px;opacity:0.5}
        .auto-refresh-bar{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-inset);border-radius:var(--r-sm);font-size:0.75rem;color:var(--text-tertiary);margin-bottom:12px}.refresh-dot{width:8px;height:8px;background:var(--success);border-radius:50%;animation:pulse 2s infinite}

        .modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.3);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);z-index:500;align-items:center;justify-content:center;padding:14px}.modal-overlay.show{display:flex}
        .modal{background:var(--bg-raised);border-radius:var(--r-xl);width:100%;max-width:480px;max-height:85vh;overflow-y:auto;padding:24px;animation:modalIn 0.3s var(--ease);box-shadow:var(--shadow-xl)}
        @keyframes modalIn{from{transform:scale(0.96) translateY(12px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}
        .modal-title{font-size:1.05rem;font-weight:800;margin-bottom:16px}.modal-actions{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}.modal-actions .btn{flex:1;justify-content:center;min-width:120px}

        .wa-modal .modal{max-width:380px}.wa-phone-wrap{display:flex;gap:0;margin-bottom:12px;border:1.5px solid var(--border);border-radius:var(--r-sm);overflow:hidden;background:var(--bg-raised)}.wa-prefix{padding:12px 14px;background:var(--bg-inset);font-weight:700;font-size:0.88rem;color:var(--text-secondary);border-right:1px solid var(--border);white-space:nowrap;display:flex;align-items:center}.wa-phone-input{flex:1;padding:12px 14px;border:none;font-size:1rem;font-weight:700;font-family:var(--font-mono);background:var(--bg-raised);outline:none}.wa-phone-wrap:focus-within{border-color:var(--primary);box-shadow:0 0 0 4px var(--primary-glow)}
        .wa-receipt-preview{background:var(--bg-inset);border-radius:var(--r-sm);padding:14px;font-size:0.75rem;max-height:200px;overflow-y:auto;border:1px solid var(--border);white-space:pre-wrap;font-family:var(--font-mono);color:var(--text-secondary);margin-bottom:12px}

        .toast-wrap{position:fixed;top:60px;right:14px;z-index:1000}
        .toast{background:var(--text-primary);color:var(--text-inverse);padding:12px 18px;border-radius:var(--r-md);margin-bottom:6px;font-size:0.82rem;font-weight:600;box-shadow:var(--shadow-lg);max-width:280px;animation:slideIn 0.3s var(--ease),fadeOut 0.3s 2.7s forwards}.toast.success{background:var(--success)}.toast.error{background:var(--danger)}
        @keyframes slideIn{from{transform:translateX(120%);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes fadeOut{to{opacity:0;transform:translateY(-8px)}}

        .empty{text-align:center;padding:30px 16px;color:var(--text-secondary)}.empty-icon{font-size:2rem;margin-bottom:8px;opacity:0.4}.loading{text-align:center;padding:24px;color:var(--text-secondary)}.spinner{border:3px solid var(--bg-inset);border-top-color:var(--primary);border-radius:50%;width:28px;height:28px;animation:spin 0.8s linear infinite;margin:0 auto 10px}@keyframes spin{to{transform:rotate(360deg)}}

        @media(min-width:500px){.header-time{display:block}}
        @media(min-width:700px){.shortcut-hint{display:block}}
        @media(min-width:869px){.order-layout{display:flex;flex-direction:row;gap:20px;align-items:flex-start}.menu-grid{grid-template-columns:repeat(auto-fill,minmax(135px,1fr));gap:12px}.order-right{width:380px;flex-shrink:0;position:sticky;top:110px;max-height:calc(100vh - 130px);overflow-y:auto}#cartCard .card-title{position:sticky;top:0;background:var(--bg-raised);z-index:1}#cartContent{display:flex;flex-direction:column}.cart-footer{position:sticky;bottom:0}}
        @media(min-width:1100px){.order-right{width:420px}.menu-grid{grid-template-columns:repeat(auto-fill,minmax(145px,1fr))}}
        @media(max-width:868px){.order-layout{flex-direction:column;gap:14px}.order-right{width:100%;position:static;max-height:none}.order-right .card{max-height:none}.cart-scroll{max-height:400px}}
        @media(max-width:600px){body{font-size:14px}.header{padding:10px 12px}.header-logo{font-size:0.95rem}.header-staff{max-width:90px;font-size:0.68rem;padding:3px 10px}.header-counter{font-size:0.7rem;padding:3px 10px}.btn-logout{padding:5px 10px;font-size:0.68rem}.nav-tabs{top:43px;padding:4px 8px}.nav-tab{padding:6px 4px 5px;font-size:0.62rem;min-width:48px}.nav-tab .tab-icon{font-size:1rem}.tab-content{padding:12px;padding-bottom:70px}.menu-grid{grid-template-columns:repeat(3,1fr);gap:8px}.menu-item{padding:10px 6px;border-radius:10px}.menu-item .item-cat{font-size:0.52rem}.menu-item .item-name{font-size:0.72rem;min-height:2.2em}.menu-item .item-price{font-size:0.82rem}.menu-item .item-badge{width:20px;height:20px;font-size:0.65rem;top:-5px;right:-5px}.card{padding:14px;margin-bottom:10px;border-radius:14px}.card-title{font-size:0.85rem;margin-bottom:12px;padding:14px 14px 10px!important}.search-bar input{padding:10px 14px 10px 36px;font-size:0.82rem}.search-bar::before{left:12px;font-size:0.8rem}.cat-chip{padding:6px 14px;font-size:0.72rem}.cart-scroll{padding:0 14px;max-height:none;overflow-y:visible}.cart-footer{padding:12px 14px 14px}.cart-item{flex-wrap:wrap;padding:8px 0}.cart-info{flex:1 1 100%;margin-bottom:4px}.cart-name{font-size:0.8rem}.cart-price{font-size:0.7rem}.cart-controls{gap:5px}.qty-btn{width:28px;height:28px;font-size:0.9rem}.cart-subtotal{font-size:0.82rem;flex-basis:auto;margin-left:auto}.table-row{flex-wrap:wrap;margin:10px 0 12px}.table-row label{width:100%;margin-bottom:4px;font-size:0.78rem}.table-input{width:100%}.discount-section{flex-wrap:wrap}.discount-section label{width:100%;margin-bottom:4px;font-size:0.78rem}.discount-input{width:100%}.total-bar{padding:14px 16px;margin-bottom:10px}.total-label{font-size:0.78rem}.total-amount{font-size:1.3rem}.payment-methods{gap:5px}.pay-btn{padding:8px 4px;font-size:0.7rem}.pay-btn .pay-icon{font-size:1rem}.cash-calc{padding:10px}.cash-row{flex-wrap:wrap}.cash-row label{width:100%;margin-bottom:4px;font-size:0.78rem}.cash-input{width:100%}.quick-cash-btn{padding:5px 10px;font-size:0.68rem}.change-box{font-size:0.95rem;padding:10px}.btn-row{flex-direction:column;gap:8px}.btn-row .btn{width:100%}.btn-save-order{padding:12px;font-size:0.85rem}.btn-primary{padding:13px;font-size:0.88rem}.order-filter-btn{padding:6px 3px;font-size:0.68rem;min-width:50px}.order-card{padding:12px}.order-num{font-size:1rem}.order-items{font-size:0.72rem}.order-total{font-size:0.95rem}.order-actions{margin-top:8px;width:100%;justify-content:flex-end}.order-actions .btn{padding:5px 10px;font-size:0.68rem}.report-header{flex-direction:column;align-items:stretch}.report-tabs{max-width:100%}.report-tab{padding:7px 5px;font-size:0.7rem}.btn-export{width:100%;justify-content:center}.sales-grid{grid-template-columns:1fr;gap:8px}.stat-card{padding:16px}.stat-value{font-size:1.3rem}.stat-card.hero-stat{padding:22px}.stat-card.hero-stat .stat-value{font-size:1.8rem}.pay-stats{gap:6px}.pay-stat{min-width:calc(50% - 3px);padding:12px 6px}.donut-container{flex-direction:column;align-items:center;gap:14px}.donut-chart{width:120px;height:120px}.donut-hole{width:60px;height:60px}.donut-hole-val{font-size:0.9rem}.pie-legend-item{font-size:0.72rem}.cal-day .cal-val{display:none}.hourly-label{font-size:0.38rem}.top-bar-bg{width:60px}.form-row{flex-direction:column}.modal{padding:20px;max-height:90vh}.modal-title{font-size:1rem}.receipt{padding:18px 14px;font-size:0.72rem}.login-card{padding:32px 24px;max-width:340px}.login-logo{font-size:1.6rem}.login-shop-name{font-size:0.9rem;padding:12px 16px}.pin-input{padding:14px;font-size:1.2rem;letter-spacing:10px}.btn-login{padding:14px;font-size:0.9rem}#qrBox img{max-width:200px}}
        @media(max-width:380px){.menu-grid{grid-template-columns:repeat(2,1fr)}.qty-btn{width:26px;height:26px}.cart-name{font-size:0.75rem}.cart-subtotal{font-size:0.78rem}.total-amount{font-size:1.2rem}}
        @media print{body *{visibility:hidden}.receipt,.receipt *{visibility:visible}.receipt{position:absolute;top:0;left:0}}
    </style>
</head>
<body>
<div class="login-screen" id="loginScreen">
    <div class="login-card">
        <div class="login-logo"><span>POS</span><span>Kedai</span></div>
        <p class="login-subtitle">üçΩÔ∏è Sistem POS Kedai Makanan</p>
        <div class="login-shop-name" id="loginShopName">Memuatkan...</div>
        <input type="password" class="pin-input" id="pinInput" placeholder="PIN" maxlength="6" inputmode="numeric" onkeyup="if(event.key==='Enter')doLogin()">
        <button class="btn-login" onclick="doLogin()">Masuk</button>
        <p class="login-skip" onclick="skipLogin()">Masuk tanpa PIN ‚Üí</p>
    </div>
</div>

<div class="app-container" id="appContainer">
    <div class="offline-banner" id="offBanner">‚ö†Ô∏è Tiada internet.</div>
    <div class="header">
        <div class="header-left">
            <span class="header-logo"><span>POS</span><span>Kedai</span></span>
            <span class="header-staff" id="staffBadge">üë§ Admin</span>
        </div>
        <div class="header-right">
            <span class="offline-dot" id="offDot"></span>
            <span class="header-counter" id="orderCounter">#0</span>
            <span class="header-time" id="clock"></span>
            <button class="btn-logout" onclick="doLogout()">Keluar</button>
        </div>
    </div>
    <div class="nav-tabs">
        <button class="nav-tab active" onclick="go('order',this)"><span class="tab-icon">üõí</span>Pesanan</button>
        <button class="nav-tab" onclick="go('list',this)"><span class="tab-icon">üìã</span>Senarai</button>
        <button class="nav-tab" onclick="go('dapur',this)" id="tabDapur"><span class="tab-icon">üîî</span>Dapur</button>
        <button class="nav-tab" onclick="go('sales',this)" id="tabSales"><span class="tab-icon">üìä</span>Jualan</button>
        <button class="nav-tab" onclick="go('menu',this)" id="tabMenu"><span class="tab-icon">üìù</span>Menu</button>
        <button class="nav-tab" onclick="go('settings',this)" id="tabSettings"><span class="tab-icon">‚öôÔ∏è</span>Tetapan</button>
    </div>
    <div class="toast-wrap" id="toastWrap"></div>
    <div class="tab-content active" id="tab-order">
        <div class="order-layout">
            <div class="order-left">
                <div class="search-bar"><input type="text" id="menuSearch" placeholder="Cari menu..."></div>
                <div class="category-filter" id="catFilter"></div>
                <div class="menu-grid" id="menuGrid"><div class="loading"><div class="spinner"></div>Memuatkan menu...</div></div>
            </div>
            <div class="order-right">
                <div class="card" id="cartCard">
                    <div class="card-title">üõí Troli <span id="cartCount" style="background:var(--primary);color:white;padding:2px 8px;border-radius:var(--r-full);font-size:0.7rem;margin-left:4px;font-family:var(--font-mono)">0</span><span style="margin-left:auto"><button class="btn btn-ghost btn-sm" onclick="clearCart()">üóëÔ∏è Kosong</button></span></div>
                    <div id="cartEmpty" class="cart-empty"><div class="cart-empty-icon">üõí</div><div class="cart-empty-text">Troli kosong</div><div class="cart-empty-hint">Tekan menu untuk tambah</div></div>
                    <div id="cartContent">
                        <div class="cart-scroll" id="cartScroll">
                            <div class="table-row"><label>ü™ë Meja:</label><input type="text" class="table-input" id="tableNo" placeholder="-" maxlength="10"></div>
                            <div id="cartList"></div>
                            <div class="discount-section"><label>üè∑Ô∏è Diskaun (RM):</label><input type="number" class="discount-input" id="discountAmt" value="0" min="0" step="0.50" oninput="renderCart()"></div>
                            <div id="summaryLines"></div>
                        </div>
                        <div class="cart-footer">
                            <div class="total-bar"><span class="total-label">JUMLAH</span><span class="total-amount">RM <span id="cartTotal">0.00</span></span></div>
                            <div style="font-weight:700;font-size:0.82rem;margin-bottom:6px;color:var(--text-secondary)">üí∞ Cara Bayar</div>
                            <div class="payment-methods"><button class="pay-btn active" onclick="pickPay('cash',this)"><span class="pay-icon">üíµ</span>Tunai</button><button class="pay-btn" onclick="pickPay('qr',this)"><span class="pay-icon">üì±</span>QR</button><button class="pay-btn" onclick="pickPay('transfer',this)"><span class="pay-icon">üè¶</span>Transfer</button></div>
                            <div class="cash-calc show" id="cashCalc"><div class="quick-cash" id="quickCash"></div><div class="cash-row"><label>üíµ Diterima:</label><input type="number" class="cash-input" id="cashIn" oninput="calcChange()" placeholder="0.00" step="0.50"></div><div class="change-box" id="changeBox">-</div></div>
                            <div class="pay-info-box" id="qrBox"><p style="font-weight:700;margin-bottom:8px;font-size:0.9rem">üì± Scan QR untuk Bayar</p><div id="qrContent"><p style="color:var(--text-tertiary)">QR belum disetup.</p></div></div>
                            <div class="pay-info-box" id="transferBox"><p style="font-weight:700;margin-bottom:8px">üè¶ Transfer</p><div id="transferContent"><p style="color:var(--text-tertiary)">Bank belum disetup.</p></div></div>
                            <div class="btn-row"><button class="btn btn-save-order" onclick="saveOrderPending()" id="btnSave">üíæ Simpan</button><button class="btn btn-primary" onclick="submitOrder()" id="btnSubmit">‚úÖ Selesai & Bayar</button></div>
                            <div class="shortcut-hint"><kbd>Ctrl</kbd>+<kbd>Enter</kbd> bayar cepat</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-content" id="tab-list">
        <div class="card"><div class="card-title">üìã Senarai Pesanan</div><div class="form-group"><input type="date" class="form-input" id="orderDate" onchange="loadOrders()"></div><div class="order-filter"><button class="order-filter-btn active" onclick="filterOrders('all',this)">Semua</button><button class="order-filter-btn" onclick="filterOrders('completed',this)">‚úÖ Selesai</button><button class="order-filter-btn" onclick="filterOrders('pending',this)">‚è≥ Belum</button><button class="order-filter-btn" onclick="filterOrders('cancelled',this)">‚ùå Batal</button></div></div>
        <div id="ordersList"><div class="loading"><div class="spinner"></div>Memuatkan...</div></div>
    </div>
    <div class="tab-content" id="tab-sales"><div class="card"><div class="report-header"><div class="report-tabs"><button class="report-tab active" onclick="switchReport('daily',this)">üìÖ Harian</button><button class="report-tab" onclick="switchReport('weekly',this)">üìä Mingguan</button><button class="report-tab" onclick="switchReport('monthly',this)">üìÜ Bulanan</button></div><button class="btn-export" onclick="exportSalesCSV()">üì• Export</button></div><div id="reportDatePicker"></div></div><div id="salesDash"></div></div>
    <div class="tab-content" id="tab-dapur"><div class="card"><div class="dapur-header"><div class="card-title" style="margin-bottom:0">üîî Papan Dapur</div><span class="dapur-count-badge" id="dapurCount">0 pesanan</span></div><div class="auto-refresh-bar"><div class="refresh-dot"></div><span>Auto kemaskini setiap 30 saat</span><button onclick="loadDapur()" style="margin-left:auto;background:none;border:none;cursor:pointer;color:var(--primary);font-weight:700;font-size:0.78rem;font-family:var(--font)">üîÑ Muat Semula</button></div></div><div id="dapurList"><div class="loading"><div class="spinner"></div>Memuatkan...</div></div></div>
    <div class="tab-content" id="tab-menu">
        <div id="menuAdminView"><div class="card"><div class="card-title">‚ûï Tambah Menu Baru</div><div class="form-row"><div class="form-group"><label>Nama</label><input type="text" class="form-input" id="newName" placeholder="Nasi Lemak"></div><div class="form-group" style="max-width:100px"><label>Harga (RM)</label><input type="number" class="form-input" id="newPrice" placeholder="5.00" step="0.50" min="0"></div></div><div class="form-group"><label>Kategori</label><div style="display:flex;gap:8px;align-items:center"><select class="form-input" id="newCat" onchange="toggleCustomCat('new',this.value)" style="flex:1"><option id="newCatFeatured" value="">‚≠ê (Kategori Utama)</option><option value="Makanan">üçö Makanan</option><option value="Minuman">ü•§ Minuman</option><option value="Kuih">üç∞ Kuih</option><option value="Tambahan">‚ûï Tambahan</option><option value="Set">üç± Set</option><option value="Lain-lain">üì¶ Lain-lain</option><option value="__custom__">‚úèÔ∏è Kategori Lain (Taip)...</option></select></div><input type="text" class="form-input" id="newCatCustom" placeholder="Taip nama kategori..." style="display:none;margin-top:6px" oninput="syncCustomCat('new')"></div><button class="btn btn-success" style="width:100%;justify-content:center" onclick="addMenu()">‚ûï Tambah</button></div><div class="card"><div class="card-title">üìã Senarai Menu</div><div id="menuManage"><div class="loading"><div class="spinner"></div>Memuatkan...</div></div></div></div>
        <div id="menuStaffView" style="display:none"><div class="card" style="margin-bottom:8px"><div style="display:flex;align-items:center;gap:8px"><span style="font-size:1.1rem">üìã</span><span style="font-weight:800;font-size:0.95rem">Senarai Menu</span><span style="font-size:0.72rem;color:var(--text-tertiary);background:var(--bg-inset);padding:2px 8px;border-radius:var(--r-sm);margin-left:auto">Paparan sahaja</span></div></div><div id="menuStaffList"><div class="loading"><div class="spinner"></div>Memuatkan...</div></div></div>
    </div>
    <div class="tab-content" id="tab-settings">
        <div class="card"><div class="card-title">üë• Urus Staff</div><div class="form-row"><div class="form-group"><label>PIN</label><input type="text" class="form-input" id="newStaffPin" placeholder="1234" maxlength="6" inputmode="numeric"></div><div class="form-group"><label>Nama</label><input type="text" class="form-input" id="newStaffName" placeholder="Ahmad"></div><div class="form-group" style="max-width:100px"><label>Peranan</label><select class="form-input" id="newStaffRole"><option value="staff">Staff</option><option value="admin">Admin</option></select></div></div><button class="btn btn-success" style="width:100%;justify-content:center" onclick="addStaff()">‚ûï Tambah Staff</button><div style="margin-top:12px" id="staffList"><div class="loading"><div class="spinner"></div>Memuatkan...</div></div></div>
        <div class="card"><div class="card-title">‚≠ê Kategori Utama</div><p style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:12px">Kategori ini akan muncul pertama dalam tab Pesanan dan Menu.</p><div class="form-group"><label>Nama Kategori Utama</label><input type="text" class="form-input" id="featuredCatInput" placeholder="contoh: Amazy, Chef Special, Signature..."></div><p style="font-size:0.72rem;color:var(--text-tertiary);margin-bottom:10px">‚ö†Ô∏è Tukar nama akan auto-kemaskini semua menu yang ada dalam kategori ini.</p><button class="btn btn-success" style="width:100%;justify-content:center" onclick="saveFeaturedCat()">üíæ Simpan Kategori Utama</button></div>
        <div class="card"><div class="card-title">üì± QR Payment</div><div class="form-group"><label>üîó Link URL Gambar QR</label><input type="text" class="form-input" id="qrUrl" placeholder="https://i.imgur.com/contoh.jpg"></div><button class="btn btn-info" style="width:100%;justify-content:center;margin-bottom:4px" onclick="saveQRUrl()">üíæ Simpan URL</button><p style="font-size:0.72rem;color:var(--text-tertiary);text-align:center;margin-bottom:8px">Pastikan link berakhir .jpg / .png dan boleh diakses</p><div class="qr-divider">atau upload fail gambar</div><div class="form-group"><label>üìÅ Upload Gambar QR</label><input type="file" class="form-input" id="qrUpload" accept="image/*" onchange="previewQR(this)"></div><div id="qrPreview" style="text-align:center;margin:8px 0"></div><button class="btn btn-info" style="width:100%;justify-content:center" onclick="saveQR()">üíæ Simpan Gambar</button></div>
        <div class="card"><div class="card-title">üè¶ Maklumat Transfer</div><div class="form-group"><label>Nama Bank</label><input type="text" class="form-input" id="setBankName" placeholder="Maybank"></div><div class="form-group"><label>No. Akaun</label><input type="text" class="form-input" id="setBankAcc" placeholder="1234567890"></div><div class="form-group"><label>Nama Pemilik</label><input type="text" class="form-input" id="setBankHolder" placeholder="Ahmad"></div><button class="btn btn-info" style="width:100%;justify-content:center" onclick="saveBankInfo()">üíæ Simpan</button></div>
    </div>
</div>
<div class="modal-overlay" id="editModal"><div class="modal"><div class="modal-title">‚úèÔ∏è Edit Pesanan <span id="editId"></span></div><div id="editItems"></div><div class="total-bar"><span class="total-label">JUMLAH</span><span class="total-amount">RM <span id="editTotal">0.00</span></span></div><div class="modal-actions"><button class="btn btn-outline" onclick="closeM('editModal')">Batal</button><button class="btn btn-success" onclick="saveEdit()">üíæ Simpan</button></div></div></div>
<div class="modal-overlay" id="editPendingModal"><div class="modal" style="max-width:520px;padding:0;overflow:hidden;display:flex;flex-direction:column;max-height:90vh"><div style="padding:18px 20px 14px;border-bottom:1px solid var(--border);flex-shrink:0"><div class="modal-title" style="margin-bottom:0">‚úèÔ∏è Edit Pesanan <span id="editPendingId" style="color:var(--primary)"></span></div><div style="font-size:0.75rem;color:var(--text-tertiary);margin-top:3px">Tambah item baru atau ubah kuantiti item sedia ada</div></div><div style="overflow-y:auto;flex:1;padding:16px 20px"><div style="background:var(--primary-soft);border:1.5px solid var(--primary-muted);border-radius:var(--r-lg);padding:14px;margin-bottom:16px"><div style="font-weight:800;font-size:0.85rem;color:var(--primary);margin-bottom:10px;display:flex;align-items:center;gap:6px">‚ûï Tambah Item Baru</div><div style="position:relative;margin-bottom:10px"><input type="text" id="epMenuSearch" placeholder="üîç Cari nama menu..." oninput="renderEpMenu()" style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--r-sm);font-size:0.85rem;font-family:var(--font);background:var(--bg-raised);outline:none;transition:border var(--dur)" onfocus="this.style.borderColor='var(--primary)'" onblur="this.style.borderColor='var(--border)'"></div><div id="epCatFilter" style="display:flex;gap:5px;overflow-x:auto;padding-bottom:6px;margin-bottom:10px;-webkit-overflow-scrolling:touch;scrollbar-width:none"></div><div id="epMenuList" style="max-height:220px;overflow-y:auto;display:grid;grid-template-columns:repeat(2,1fr);gap:6px;padding-right:2px"></div></div><div><div style="font-weight:800;font-size:0.85rem;margin-bottom:10px;display:flex;align-items:center;justify-content:space-between"><span>üõí Item Dalam Pesanan</span><span id="epItemCount" style="background:var(--primary);color:white;padding:2px 8px;border-radius:var(--r-full);font-size:0.7rem;font-family:var(--font-mono)">0</span></div><div id="editPendingItems"></div></div></div><div style="padding:14px 20px 16px;border-top:1px solid var(--border);flex-shrink:0;background:var(--bg-raised)"><div class="total-bar" style="margin-bottom:12px"><span class="total-label">JUMLAH DIKEMASKINI</span><span class="total-amount">RM <span id="editPendingTotal">0.00</span></span></div><div style="display:flex;gap:8px"><button class="btn btn-outline" onclick="closeM('editPendingModal')" style="flex:1">Batal</button><button class="btn btn-success" onclick="saveEditPending()" style="flex:2">üíæ Simpan Perubahan</button></div></div></div></div>
<div class="modal-overlay" id="menuModal"><div class="modal"><div class="modal-title">‚úèÔ∏è Edit Menu</div><input type="hidden" id="emId"><div class="form-group"><label>Nama</label><input type="text" class="form-input" id="emName"></div><div class="form-row"><div class="form-group"><label>Harga (RM)</label><input type="number" class="form-input" id="emPrice" step="0.50" min="0"></div><div class="form-group"><label>Kategori</label><select class="form-input" id="emCat" onchange="toggleCustomCat('em',this.value)"><option id="emCatFeatured" value="">‚≠ê (Kategori Utama)</option><option value="Makanan">üçö Makanan</option><option value="Minuman">ü•§ Minuman</option><option value="Kuih">üç∞ Kuih</option><option value="Tambahan">‚ûï Tambahan</option><option value="Set">üç± Set</option><option value="Lain-lain">üì¶ Lain-lain</option><option value="__custom__">‚úèÔ∏è Kategori Lain (Taip)...</option></select><input type="text" class="form-input" id="emCatCustom" placeholder="Nama kategori..." style="display:none;margin-top:6px" oninput="syncCustomCat('em')"></div></div><div class="modal-actions"><button class="btn btn-outline" onclick="closeM('menuModal')">Batal</button><button class="btn btn-success" onclick="saveMenu()">üíæ Simpan</button></div></div></div>
<div class="modal-overlay" id="receiptModal"><div class="modal"><div id="receiptBox"></div><div class="modal-actions"><button class="btn btn-outline" onclick="closeM('receiptModal')">Tutup</button><button class="btn btn-whatsapp" onclick="openWaModal()">üì≤ WhatsApp</button><button class="btn btn-info" onclick="window.print()">üñ®Ô∏è Cetak</button></div></div></div>
<div class="modal-overlay wa-modal" id="waModal"><div class="modal" style="max-width:380px"><div class="modal-title">üì≤ Hantar Resit ke WhatsApp</div><p style="font-size:0.82rem;color:var(--text-secondary);margin-bottom:14px">Masukkan nombor telefon pelanggan</p><label style="font-weight:700;font-size:0.8rem;color:var(--text-secondary);display:block;margin-bottom:6px">No. Telefon</label><div class="wa-phone-wrap"><span class="wa-prefix">üá≤üáæ +60</span><input type="tel" class="wa-phone-input" id="waPhone" placeholder="123456789" maxlength="12" inputmode="tel" onkeyup="if(event.key==='Enter')sendWhatsApp()"></div><p style="font-size:0.72rem;color:var(--text-tertiary);margin-bottom:14px">Contoh: 123456789 (tanpa 0 di depan)</p><div style="font-weight:700;font-size:0.8rem;color:var(--text-secondary);margin-bottom:6px">üìã Pratonton Resit</div><div class="wa-receipt-preview" id="waReceiptPreview">-</div><div class="modal-actions"><button class="btn btn-outline" onclick="closeM('waModal')">Batal</button><button class="btn btn-whatsapp" onclick="sendWhatsApp()" id="btnSendWa">üì≤ Hantar</button></div></div></div>
<div class="modal-overlay" id="completeModal"><div class="modal"><div class="modal-title">üí∞ Selesaikan Pesanan <span id="completeOrderNum"></span></div><div id="completeItems"></div><div class="total-bar"><span class="total-label">JUMLAH</span><span class="total-amount">RM <span id="completeTotal">0.00</span></span></div><div style="font-weight:700;font-size:0.82rem;margin:10px 0 6px;color:var(--text-secondary)">üí∞ Cara Bayar</div><div class="payment-methods"><button class="pay-btn active" id="cPayCash" onclick="pickCompletePay('cash')"><span class="pay-icon">üíµ</span>Tunai</button><button class="pay-btn" id="cPayQr" onclick="pickCompletePay('qr')"><span class="pay-icon">üì±</span>QR</button><button class="pay-btn" id="cPayTransfer" onclick="pickCompletePay('transfer')"><span class="pay-icon">üè¶</span>Transfer</button></div><div class="cash-calc show" id="completeCashCalc"><div class="cash-row"><label>üíµ Diterima:</label><input type="number" class="cash-input" id="completeCashIn" oninput="calcCompleteChange()" placeholder="0.00" step="0.50"></div><div class="change-box" id="completeChangeBox">-</div></div><div class="pay-info-box" id="completeQrBox"></div><div class="pay-info-box" id="completeTransferBox"></div><div class="modal-actions"><button class="btn btn-outline" onclick="closeM('completeModal')">Batal</button><button class="btn btn-success" onclick="doCompleteOrder()" id="btnComplete">‚úÖ Selesai & Bayar</button></div></div></div>
<div id="waReceiptClone" style="position:fixed;left:-9999px;top:0;width:320px;background:white;padding:0;display:none;z-index:-1"></div>

</body>
</html>
